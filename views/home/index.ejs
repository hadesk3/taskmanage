<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <!-- Favicon -->
        <link rel="shortcut icon" href="/images/favicon.ico" />
        <link rel="stylesheet" href="/css/backend-plugin.min.css" />
        <link rel="stylesheet" href="/css/backend.css?v=1.0.0" />
        <link
            rel="stylesheet"
            href="/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css"
        />
        <link rel="stylesheet" href="/vendor/remixicon/fonts/remixicon.css" />

        <link
            rel="stylesheet"
            href="/vendor/tui-calendar/tui-calendar/dist/tui-calendar.css"
        />
        <link
            rel="stylesheet"
            href="/vendor/tui-calendar/tui-date-picker/dist/tui-date-picker.css"
        />
        <link
            rel="stylesheet"
            href="/vendor/tui-calendar/tui-time-picker/dist/tui-time-picker.css"
        />
        <style>
.current-projects-wrapper {
    position: relative;
    overflow-x: auto;
    white-space: nowrap;
    scroll-behavior: smooth;
    width: 100%;
    padding: 10px;
    display: flex; /* Chỉnh các item nằm ngang */
}

/* Ẩn thanh cuộn */
.current-projects-wrapper::-webkit-scrollbar {
    display: none;
}
.current-projects-wrapper {
    scrollbar-width: none;
}

/* Đảm bảo các dự án hiển thị ngang */
.top-projects {
    display: flex; /* Bố cục theo hàng ngang */
    flex-wrap: nowrap; /* Không xuống dòng */
    gap: 15px; /* Khoảng cách giữa các dự án */
    padding: 0;
}

/* Định dạng từng dự án */
.top-projects li {
    flex: 0 0 auto; /* Không co dãn, giữ nguyên kích thước */
    width: 300px; /* Điều chỉnh kích thước phù hợp */
}
/* Định dạng chung cho container chứa nút */

/* Định dạng nút điều hướng */
.scroll-btn {
    background-color: #007bff; /* Màu nền */
    color: white; /* Màu chữ */
    border: none;
    padding: 8px 12px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 5px;
    transition: background 0.3s ease;
}

.scroll-btn:hover {
    background-color: #0056b3; /* Đổi màu khi hover */
}

        </style>

        <script>
            function scrollProjects(direction) {
    const container = document.querySelector(".current-projects-wrapper");
    const scrollAmount = 300; // Điều chỉnh khoảng cách trượt

    container.scrollBy({
        left: direction * scrollAmount,
        behavior: "smooth",
    });
}

        </script>
    </head>
    
    <body class="  ">
        <!-- loader Start -->
        <div id="loading">
            <div id="loading-center"></div>
        </div>
        <!-- loader END -->
        <!-- Wrapper Start -->
        <div class="wrapper">
            <div class="content-page">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xl-8">
                            <div
                                class="card-transparent card-block card-stretch card-height"
                            >
                                <div class="card-body p-0">
                                    <div class="card">
                                        <div
                                            class="card-header d-flex justify-content-between"
                                        >
                                            <div class="header-title">
                                                <h4 class="card-title">
                                                    Overview Progress
                                                </h4>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-inline p-0 mb-0">
                                                <li class="mb-1">
                                                    <div class="row">
                                                        <div class="col-sm-3">
                                                            <p class="mb-0">
                                                                UX / UI Design
                                                            </p>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div
                                                                class="d-flex align-items-center justify-content-between"
                                                            >
                                                                <div
                                                                    class="iq-progress-bar bg-secondary-light"
                                                                >
                                                                    <span
                                                                        class="bg-secondary iq-progress progress-1"
                                                                        data-percent="65"
                                                                    ></span>
                                                                </div>
                                                                <span
                                                                    class="ml-3"
                                                                    >65%</span
                                                                >
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div
                                                                class="iq-media-group text-sm-right"
                                                            >
                                                                <a
                                                                    href="#"
                                                                    class="iq-media"
                                                                >
                                                                    <img
                                                                        class="img-fluid avatar-40 rounded-circle"
                                                                        src="/images/user/05.jpg"
                                                                        alt=""
                                                                    />
                                                                </a>
                                                                <a
                                                                    href="#"
                                                                    class="iq-media"
                                                                >
                                                                    <img
                                                                        class="img-fluid avatar-40 rounded-circle"
                                                                        src="/images/user/06.jpg"
                                                                        alt=""
                                                                    />
                                                                </a>
                                                                <a
                                                                    href="#"
                                                                    class="iq-media"
                                                                >
                                                                    <img
                                                                        class="img-fluid avatar-40 rounded-circle"
                                                                        src="/images/user/07.jpg"
                                                                        alt=""
                                                                    />
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                             
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row">
                                        
                                        
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4">
                            <div
                                class="card card-block card-stretch card-height"
                            >
                                <div class="card-body">
                                    <div
                                        class="card border-bottom pb-2 shadow-none"
                                    >
                                        <div
                                            class="card-body text-center inln-date flet-datepickr"
                                        >
                                            <input
                                                type="text"
                                                id="inline-date"
                                                class="date-input basicFlatpickr d-none"
                                                readonly="readonly"
                                            />
                                        </div>
                                    </div>
                                  
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="card-transparent mb-0">
                                <div class="card-header d-flex align-items-center justify-content-between p-0 pb-3">
                                    <div class="header-title">
                                        <h4 class="card-title">Current Projects</h4>
                                    </div>
                                </div>
                                <div class="card-body p-0 position-relative">
                                    <!-- Nút trượt trái -->
                                    <button class="scroll-btn left" onclick="scrollProjects(-1)">
                                        &#10094;
                                    </button>
                                    <button class="scroll-btn right" onclick="scrollProjects(1)">
                                        &#10095;
                                    </button>
                                    <!-- Bọc danh sách trong một div có thể cuộn ngang -->
                                    <div class="current-projects-wrapper">
                                        <ul class="list-unstyled row top-projects mb-0">
                                            <li class="col-lg-4">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <h5 class="mb-3">Admin Panel Customization</h5>
                                                        <p class="mb-3">
                                                            <i class="las la-calendar-check mr-2"></i>02 / 02 / 2021
                                                        </p>
                                                        <div class="iq-progress-bar bg-primary-light mb-4">
                                                            <span class="bg-primary iq-progress progress-1" data-percent="65"></span>
                                                        </div>
                                                        <div class="d-flex align-items-center justify-content-between">
                                                            <div class="iq-media-group">
                                                                <a href="#" class="iq-media">
                                                                    <img src="/images/user/02.jpg" class="img-fluid avatar-40 rounded-circle" alt=""/>
                                                                </a>
                                                                <a href="#" class="iq-media">
                                                                    <img src="/images/user/03.jpg" class="img-fluid avatar-40 rounded-circle" alt=""/>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <!-- Các project khác sẽ được thêm vào đây -->
                                        </ul>
                                    </div>
                        
                                  
                                </div>
                            </div>
                        </div>
                        
                        
                    </div>
                    <!-- Page end  -->
                </div>
            </div>
        </div>
        <!-- Wrapper End-->

        <!-- Modal list start -->
        <div
            class="modal fade"
            role="dialog"
            aria-modal="true"
            id="new-project-modal"
        >
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div
                        class="modal-header d-block text-center pb-3 border-bttom"
                    >
                        <h3 class="modal-title" id="exampleModalCenterTitle01">
                            New Project
                        </h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText01" class="h5"
                                        >Project Name*</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText01"
                                        placeholder="Project Name"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Categories *</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Category</option>
                                        <option>Android</option>
                                        <option>IOS</option>
                                        <option>Ui/Ux Design</option>
                                        <option>Development</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText004" class="h5"
                                        >Due Dates*</label
                                    >
                                    <input
                                        type="date"
                                        class="form-control"
                                        id="exampleInputText004"
                                        value=""
                                    />
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText07" class="h5"
                                        >Assign Members*</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText07"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div
                                    class="d-flex flex-wrap align-items-ceter justify-content-center mt-2"
                                >
                                    <div
                                        class="btn btn-primary mr-3"
                                        data-dismiss="modal"
                                    >
                                        Save
                                    </div>
                                    <div
                                        class="btn btn-primary"
                                        data-dismiss="modal"
                                    >
                                        Cancel
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div
            class="modal fade bd-example-modal-lg"
            role="dialog"
            aria-modal="true"
            id="new-task-modal"
        >
            <div
                class="modal-dialog modal-dialog-centered modal-lg"
                role="document"
            >
                <div class="modal-content">
                    <div
                        class="modal-header d-block text-center pb-3 border-bttom"
                    >
                        <h3 class="modal-title" id="exampleModalCenterTitle">
                            New Task
                        </h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText02" class="h5"
                                        >Task Name</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText02"
                                        placeholder="Enter task Name"
                                    />
                                    <a href="#" class="task-edit text-body"
                                        ><i class="ri-edit-box-line"></i
                                    ></a>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Assigned to</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Memebers</option>
                                        <option>Kianna Septimus</option>
                                        <option>Jaxson Herwitz</option>
                                        <option>Ryan Schleifer</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText05" class="h5"
                                        >Due Dates*</label
                                    >
                                    <input
                                        type="date"
                                        class="form-control"
                                        id="exampleInputText05"
                                        value=""
                                    />
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Category</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Design</option>
                                        <option>Android</option>
                                        <option>IOS</option>
                                        <option>Ui/Ux Design</option>
                                        <option>Development</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText040" class="h5"
                                        >Description</label
                                    >
                                    <textarea
                                        class="form-control"
                                        id="exampleInputText040"
                                        rows="2"
                                    ></textarea>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText005" class="h5"
                                        >Checklist</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText005"
                                        placeholder="Add List"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-0">
                                    <label for="exampleInputText01" class="h5"
                                        >Attachments</label
                                    >
                                    <div class="custom-file">
                                        <input
                                            type="file"
                                            class="custom-file-input"
                                            id="inputGroupFile003"
                                        />
                                        <label
                                            class="custom-file-label"
                                            for="inputGroupFile003"
                                            >Upload media</label
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div
                                    class="d-flex flex-wrap align-items-ceter justify-content-center mt-4"
                                >
                                    <div
                                        class="btn btn-primary mr-3"
                                        data-dismiss="modal"
                                        onclick="check()"
                                    >
                                        Save
                                    </div>
                                    <div
                                        class="btn btn-primary"
                                        data-dismiss="modal"
                                    >
                                        Cancel
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div
            class="modal fade bd-example-modal-lg"
            role="dialog"
            aria-modal="true"
            id="new-user-modal"
        >
            <div
                class="modal-dialog modal-dialog-centered modal-lg"
                role="document"
            >
                <div class="modal-content">
                    <div
                        class="modal-header d-block text-center pb-3 border-bttom"
                    >
                        <h3 class="modal-title" id="exampleModalCenterTitle02">
                            New User
                        </h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group mb-3 custom-file-small">
                                    <label for="exampleInputText01" class="h5"
                                        >Upload Profile Picture</label
                                    >
                                    <div class="custom-file">
                                        <input
                                            type="file"
                                            class="custom-file-input"
                                            id="inputGroupFile02"
                                        />
                                        <label
                                            class="custom-file-label"
                                            for="inputGroupFile02"
                                            >Choose file</label
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Full Name</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText2"
                                        placeholder="Enter your full name"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText04" class="h5"
                                        >Phone Number</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText04"
                                        placeholder="Enter phone number"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText006" class="h5"
                                        >Email</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText006"
                                        placeholder="Enter your Email"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Type</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Type</option>
                                        <option>Trainee</option>
                                        <option>Employee</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Role</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Role</option>
                                        <option>Designer</option>
                                        <option>Developer</option>
                                        <option>Manager</option>
                                        <option>BDE</option>
                                        <option>SEO</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div
                                    class="d-flex flex-wrap align-items-ceter justify-content-center mt-2"
                                >
                                    <div
                                        class="btn btn-primary mr-3"
                                        data-dismiss="modal"
                                    >
                                        Save
                                    </div>
                                    <div
                                        class="btn btn-primary"
                                        data-dismiss="modal"
                                    >
                                        Cancel
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div
            class="modal fade bd-example-modal-lg"
            role="dialog"
            aria-modal="true"
            id="new-create-modal"
        >
            <div
                class="modal-dialog modal-dialog-centered modal-lg"
                role="document"
            >
                <div class="modal-content">
                    <div
                        class="modal-header d-block text-center pb-3 border-bttom"
                    >
                        <h3 class="modal-title" id="exampleModalCenterTitle03">
                            New Task
                        </h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText03" class="h5"
                                        >Task Name</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText03"
                                        placeholder="Enter task Name"
                                    />
                                    <a href="#" class="task-edit text-body"
                                        ><i class="ri-edit-box-line"></i
                                    ></a>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Assigned to</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Memebers</option>
                                        <option>6766ea1083234ec10e77627a</option>
                                        <option>Jaxson Herwitz</option>
                                        <option>Ryan Schleifer</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText2" class="h5"
                                        >Project Name</label
                                    >
                                    <select
                                        name="type"
                                        class="selectpicker form-control"
                                        data-style="py-0"
                                    >
                                        <option>Enter your project Name</option>
                                        <option>Ui/Ux Design</option>
                                        <option>Dashboard Templates</option>
                                        <option>Wordpress Themes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText40" class="h5"
                                        >Description</label
                                    >
                                    <textarea
                                        class="form-control"
                                        id="exampleInputText40"
                                        rows="2"
                                        placeholder="Textarea"
                                    ></textarea>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    <label for="exampleInputText8" class="h5"
                                        >Checklist</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="exampleInputText8"
                                        placeholder="Add List"
                                    />
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-0">
                                    <label for="exampleInputText01" class="h5"
                                        >Attachments</label
                                    >
                                    <div class="custom-file">
                                        <input
                                            type="file"
                                            class="custom-file-input"
                                            id="inputGroupFile01"
                                        />
                                        <label
                                            class="custom-file-label"
                                            for="inputGroupFile01"
                                            >Upload media</label
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div
                                    class="d-flex flex-wrap align-items-ceter justify-content-center mt-4"
                                >
                                    <div
                                        class="btn btn-primary mr-3"
                                        data-dismiss="modal"
                                    >
                                        Save
                                    </div>
                                    <div
                                        class="btn btn-primary"
                                        data-dismiss="modal"
                                    >
                                        Cancel
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


<script>
async function fetchProjects() {
    try {
        const response = await fetch("http://localhost:3000/api/projects");
        const data = await response.json();
        if (data.code === 0) {
            let projects = data.data.projectsWithCompletion;

            // 🌟 Sắp xếp project theo ngày kết thúc giảm dần (mới nhất -> cũ nhất)
            projects.sort((a, b) => new Date(b.end_date) - new Date(a.end_date));

            // 🌟 Lấy 6 project gần nhất
            const latestProjects = projects.slice(0, 10);

            renderProjectsToCurrentProject(latestProjects);
        } else {
            console.error("Lỗi khi lấy dữ liệu:", data.message);
        }
    } catch (error) {
        console.error("Lỗi kết nối API:", error);
    }
}

function renderProjectsToCurrentProject(projects) {
    const overviewContainer = document.querySelector(".list-inline");
    const currentProjectsContainer = document.querySelector(".top-projects");

    // Xóa dữ liệu cũ (nếu có)
    overviewContainer.innerHTML = "";
    currentProjectsContainer.innerHTML = "";

    // Hiển thị tối đa 8 project trong phần Overview Progress
    projects.slice(0, 8).forEach(project => {
        const lecturersHTML = project.lecturers.map(lecturer => `
            <a href="#" class="iq-media">
                <img class="img-fluid avatar-40 rounded-circle" src="${lecturer.avatar}" alt="${lecturer.name}" />
            </a>`).join("");

        const overviewHTML = `
            <li class="mb-1">
                <div class="row">
                    <div class="col-sm-3">
                        <p class="mb-0">${project.name}</p>
                    </div>
                    <div class="col-sm-6">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="iq-progress-bar bg-secondary-light">
                                <span class="bg-secondary iq-progress" style="width: ${project.completion}%;"></span>
                            </div>
                            <span class="ml-3">${project.completion}%</span>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="iq-media-group text-sm-right">
                            ${lecturersHTML}
                        </div>
                    </div>
                </div>
            </li>`;
        overviewContainer.innerHTML += overviewHTML;
    });

    // Hiển thị tối đa 6 project trong phần Current Projects
    projects.forEach(project => {
        const lecturersHTML = project.lecturers.map(lecturer => `
            <a href="#" class="iq-media">
                <img src="${lecturer.avatar}" class="img-fluid avatar-40 rounded-circle" alt="${lecturer.name}" />
            </a>`).join("");

        const currentProjectHTML = `
            <li class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="mb-3">${project.name}</h5>
                        <p class="mb-3"><i class="las la-calendar-check mr-2"></i>
                            ${new Date(project.start_date).toLocaleDateString()} - ${new Date(project.end_date).toLocaleDateString()}
                        </p>
                        <div class="iq-progress-bar bg-primary-light mb-4">
                            <span class="bg-primary iq-progress" style="width: ${project.completion}%;"></span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="iq-media-group">
                                ${lecturersHTML}
                            </div>
                        </div>
                    </div>
                </div>
            </li>`;
        currentProjectsContainer.innerHTML += currentProjectHTML;
    });
}

document.addEventListener("DOMContentLoaded", fetchProjects);

</script>


</body>
</html>
